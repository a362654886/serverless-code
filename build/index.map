{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/graphpack/config/index.js","webpack:///./node_modules/graphpack/config/webpack.config.js","webpack:///./node_modules/graphpack/lib/server.js","webpack:///./node_modules/graphpack/lib/srcFiles.js","webpack:///./src sync ^\\.\\/(context|context\\/index)\\.(js|ts)$","webpack:///./src sync ^\\.\\/(resolvers|resolvers\\/index)\\.(js|ts)$","webpack:///./src sync ^\\.\\/(schema|schema\\/index)\\.(gql|graphql|js|ts)$","webpack:///./src/jwt/jwt-tools.ts","webpack:///./src/resolvers/courseQuery.ts","webpack:///./src/resolvers/index.ts","webpack:///./src/resolvers/studentQuery.ts","webpack:///./src/resolvers/userQuery.ts","webpack:///./src/schema.graphql","webpack:///./src/schema.ts","webpack:///./src/service/MongoDBGraphQL.ts","webpack:///./src/service/MongoDbService.ts","webpack:///./src/types/Table.ts","webpack:///external \"apollo-server\"","webpack:///external \"apollo-server-express\"","webpack:///external \"babel-loader\"","webpack:///external \"babel-preset-graphpack\"","webpack:///external \"cosmiconfig\"","webpack:///external \"dataloader\"","webpack:///external \"friendly-errors-webpack-plugin\"","webpack:///external \"fs\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"lodash/merge\"","webpack:///external \"mongodb\"","webpack:///external \"path\"","webpack:///external \"webpack\"","webpack:///external \"webpack-node-externals\""],"names":["cosmiconfig","require","webpack","defaultConfig","explorer","search","loadServerConfig","result","userConfig","config","mode","port","Number","process","env","PORT","server","loadWebpackConfig","exports","FriendlyErrorsWebpackPlugin","fs","path","nodeExternals","isDev","isWebpack","__webpack_modules__","hasBabelRc","existsSync","resolve","console","info","module","devtool","entry","index","externals","whitelist","rules","test","use","loader","options","babelrc","cacheDirectory","presets","undefined","type","node","__filename","__dirname","optimization","noEmitOnErrors","output","filename","libraryTarget","join","cwd","sourceMapFilename","performance","hints","plugins","optimize","LimitChunkCountPlugin","maxChunks","EnvironmentPlugin","DEBUG","GRAPHPACK_SRC_DIR","NODE_ENV","clearConsole","extensions","stats","target","resolvers","Object","keys","length","Error","createServer","applyMiddleware","serverPort","app","listen","ApolloExpressServer","log","graphqlPath","ApolloServer","then","url","startServer","context","typeDefs","importFirst","req","map","mod","default","saltSecret","jwtSign","payload","secretOrPrivateKey","expiresIn","sign","jwtVerify","token","verify","e","error","teacherFn","courseIds","DBTeachers","dbData","Table","Teacher","classes","filter","teacher","includes","courseId","teacherLoader","DataLoader","Query","course","dbAggregate","Course","teachers","parent","load","_id","students","arg","getStudents","allStudent","s","student","dbQuery","Student","studentName","gender","push","PureObj","create","merge","userQuery","courseQuery","studentQuery","courses","getCourses","allCourse","c","users","dbServiceGet","User","auth","userName","userPassword","dbAuth","user","schemaString","dbConnectionUrl","dbObject","dbCollectionName","dbInstance","MongoClient","connect","db","dbCollection","collection","tableName","find","toArray","data","findOne","userEmail","searchKey","localValue","lookupTable","lookupAttribute","asValue","aggregate","$lookup","from","localField","foreignField","as","page","sort","skip","limit","dbServiceGetOne","UserEmail","UserPassword","dbServiceInsert","value","insertOne","dbServiceUpdate","value1","value2","updateOne","dbServiceDelete","deleteOne","dbServiceLookup"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const cosmiconfig = require('cosmiconfig');\nconst webpack = require('webpack');\nconst defaultConfig = require('./webpack.config');\n\nconst explorer = cosmiconfig('graphpack').search();\n\nconst loadServerConfig = async () => {\n  const result = await explorer;\n  const userConfig = result\n    ? typeof result.config === 'function'\n      ? result.config(defaultConfig.mode)\n      : result.config\n    : {};\n\n  return { port: Number(process.env.PORT), ...userConfig.server };\n};\n\nconst loadWebpackConfig = async () => {\n  const result = await explorer;\n  const userConfig = result\n    ? typeof result.config === 'function'\n      ? result.config(defaultConfig.mode)\n      : result.config\n    : {};\n\n  if (typeof userConfig.webpack === 'function') {\n    return userConfig.webpack({ config: defaultConfig, webpack });\n  }\n\n  return { ...defaultConfig, ...userConfig.webpack };\n};\n\nexports.loadServerConfig = loadServerConfig;\nexports.loadWebpackConfig = loadWebpackConfig;\n","const FriendlyErrorsWebpackPlugin = require('friendly-errors-webpack-plugin');\nconst fs = require('fs');\nconst path = require('path');\nconst webpack = require('webpack');\nconst nodeExternals = require('webpack-node-externals');\n\nconst isDev = process.env.NODE_ENV !== 'production';\nconst isWebpack = typeof __webpack_modules__ === 'object';\nconst hasBabelRc = fs.existsSync(path.resolve('babel.config.js'));\n\nif (hasBabelRc && !isWebpack) {\n  console.info('🐠 Using babel.config.js defined in your app root');\n}\n\nmodule.exports = {\n  devtool: 'source-map',\n  entry: {\n    // We take care of setting up entry file under lib/index.js\n    index: ['graphpack'],\n  },\n  // When bundling with Webpack for the backend you usually don't want to bundle\n  // its node_modules dependencies. This creates an externals function that\n  // ignores node_modules when bundling in Webpack.\n  externals: [nodeExternals({ whitelist: [/^graphpack$/] })],\n  mode: isDev ? 'development' : 'production',\n  module: {\n    rules: [\n      {\n        test: /\\.(gql|graphql)/,\n        use: 'graphql-tag/loader',\n      },\n      {\n        test: /\\.(js|ts)$/,\n        use: [\n          {\n            loader: require.resolve('babel-loader'),\n            options: {\n              babelrc: true,\n              cacheDirectory: true,\n              presets: hasBabelRc\n                ? undefined\n                : [require.resolve('babel-preset-graphpack')],\n            },\n          },\n        ],\n      },\n      {\n        test: /\\.mjs$/,\n        type: 'javascript/auto',\n      },\n    ],\n  },\n  node: {\n    __filename: true,\n    __dirname: true,\n  },\n  optimization: { noEmitOnErrors: true },\n  output: {\n    filename: '[name].js',\n    libraryTarget: 'commonjs2',\n    path: path.join(process.cwd(), './build'),\n    sourceMapFilename: '[name].map',\n  },\n  performance: {\n    hints: false,\n  },\n  plugins: [\n    new webpack.optimize.LimitChunkCountPlugin({ maxChunks: 1 }),\n    new webpack.EnvironmentPlugin({\n      DEBUG: false,\n      GRAPHPACK_SRC_DIR: path.resolve(process.cwd(), 'src'),\n      NODE_ENV: 'development',\n    }),\n    new FriendlyErrorsWebpackPlugin({ clearConsole: isDev }),\n  ],\n  resolve: {\n    extensions: ['.ts', '.js'],\n  },\n  stats: 'minimal',\n  target: 'node',\n};\n","import { ApolloServer } from 'apollo-server';\nimport { ApolloServer as ApolloExpressServer } from 'apollo-server-express';\nimport { context, resolvers, typeDefs } from './srcFiles';\nimport { loadServerConfig } from '../config';\n\nif (!(resolvers && Object.keys(resolvers).length > 0)) {\n  throw Error(\n    `Couldn't find any resolvers. Please add resolvers to your src/resolvers.js`,\n  );\n}\n\nconst createServer = config => {\n  const { applyMiddleware, port: serverPort, ...options } = config;\n  const port = Number(process.env.PORT) || serverPort || 4000;\n  // Pull out fields that are not relevant for the apollo server\n\n  // Use apollo-server-express when middleware detected\n  if (\n    applyMiddleware &&\n    applyMiddleware.app &&\n    typeof applyMiddleware.app.listen === 'function'\n  ) {\n    const server = new ApolloExpressServer(options);\n    server.applyMiddleware(applyMiddleware);\n\n    return applyMiddleware.app.listen({ port }, () =>\n      console.log(\n        `🚀 Server ready at http://localhost:${port}${server.graphqlPath}`,\n      ),\n    );\n  }\n\n  // Use apollo-server\n  const server = new ApolloServer(options);\n\n  return server\n    .listen({ port })\n    .then(({ url }) => console.log(`🚀 Server ready at ${url}`));\n};\n\nconst startServer = async () => {\n  // Load server config from graphpack.config.js\n  const config = await loadServerConfig();\n\n  createServer({ ...config, context, resolvers, typeDefs });\n};\n\nstartServer();\n","export const importFirst = req =>\n  req.keys().map(mod => req(mod).default || req(mod))[0];\n\n// Optionally import modules\nexport const context = importFirst(\n  require.context(\n    process.env.GRAPHPACK_SRC_DIR,\n    true,\n    /^\\.\\/(context|context\\/index)\\.(js|ts)$/,\n  ),\n);\nexport const resolvers = importFirst(\n  require.context(\n    process.env.GRAPHPACK_SRC_DIR,\n    true,\n    /^\\.\\/(resolvers|resolvers\\/index)\\.(js|ts)$/,\n  ),\n);\nexport const typeDefs = importFirst(\n  require.context(\n    process.env.GRAPHPACK_SRC_DIR,\n    true,\n    /^\\.\\/(schema|schema\\/index)\\.(gql|graphql|js|ts)$/,\n  ),\n);\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"./src sync recursive ^\\\\.\\\\/(context|context\\\\/index)\\\\.(js|ts)$\";","var map = {\n\t\"./resolvers/index.ts\": \"./src/resolvers/index.ts\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./src sync recursive ^\\\\.\\\\/(resolvers|resolvers\\\\/index)\\\\.(js|ts)$\";","var map = {\n\t\"./schema.graphql\": \"./src/schema.graphql\",\n\t\"./schema.ts\": \"./src/schema.ts\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./src sync recursive ^\\\\.\\\\/(schema|schema\\\\/index)\\\\.(gql|graphql|js|ts)$\";","import { sign, SignOptions, verify } from 'jsonwebtoken';\r\n\r\nconst saltSecret: string | Buffer = '1234567890';\r\n\r\nconst jwtSign = (payload: object) => {\r\n  const secretOrPrivateKey: string | Buffer | { key: string; passphrase: string } = saltSecret;\r\n  // Eg: 60, \"2 days\", \"10h\", \"7d\" */\r\n  const options: SignOptions = { expiresIn: '7d' };\r\n  const result: string = sign(payload, secretOrPrivateKey, options);\r\n  return result;\r\n};\r\n\r\nconst jwtVerify = (token: string) => {\r\n  const secretOrPrivateKey: string | Buffer | { key: string; passphrase: string } = saltSecret;\r\n  try {\r\n    const result: object | string = verify(token, secretOrPrivateKey);\r\n    return result;\r\n  } catch (e) {\r\n    console.error('jwtVerify error:', e);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport { jwtSign, jwtVerify };","import { Table } from \"../types/Table\";\r\nimport DataLoader from \"dataloader\";\r\nimport { Course, Student, Teacher } from \"src/types\";\r\nimport { dbAggregate, dbData, dbQuery } from \"../service/MongoDBGraphQL\";\r\n\r\ntype studentArg = {\r\n  gender: string;\r\n};\r\n\r\n//dataloader\r\n\r\nconst teacherFn = async (courseIds: Readonly<string[]>) => {\r\n  const DBTeachers = await dbData<Teacher>(Table.Teacher);\r\n  const classes = DBTeachers.filter((teacher) =>\r\n    courseIds.includes(teacher.courseId)\r\n  );\r\n  return classes;\r\n};\r\nconst teacherLoader = new DataLoader(teacherFn);\r\n\r\n//query\r\n//\r\nexport default {\r\n  Query: {\r\n    course: (context: any) =>dbAggregate<Course>(Table.Course, \"_id\", \"Class\", \"courseId\", \"students\")\r\n  },\r\n  Course: {\r\n    teachers: (parent: Course) => teacherLoader.load(parent._id),\r\n    students: (parent: Course, arg: studentArg) => getStudents(parent, arg),\r\n  },\r\n};\r\n\r\n//help function\r\nconst getStudents = async (parent: Course, arg: studentArg) => {\r\n  const allStudent: Student[] = [];\r\n  if (parent.students) {\r\n    for (const s of parent.students) {\r\n      const student = await dbQuery<Student>(Table.Student, {\r\n        studentName: s?.studentName,\r\n      });\r\n      if (student[0].gender == arg.gender) {\r\n        allStudent.push(student[0]);\r\n      }\r\n    }\r\n  }\r\n  return allStudent;\r\n};\r\n","import merge from 'lodash/merge'\r\n\r\nimport courseQuery from './courseQuery'\r\nimport userQuery from './userQuery'\r\nimport teacherQuery from './teacherQuery'\r\nimport studentQuery from './studentQuery'\r\n\r\nconst PureObj = Object.create(null)\r\n\r\nexport default merge(PureObj, userQuery,courseQuery,studentQuery)\r\n","import { Table } from \"../types/Table\";\r\nimport { Course, Student } from \"src/types\";\r\nimport { dbAggregate, dbQuery } from \"../service/MongoDBGraphQL\";\r\n\r\nexport default {\r\n  Query: {\r\n    student: () =>\r\n      dbAggregate<Student>(\r\n        Table.Student,\r\n        \"_id\",\r\n        \"Class\",\r\n        \"studentId\",\r\n        \"courses\"\r\n      ),\r\n  },\r\n  Student: {\r\n    courses: (parent: Student) => getCourses(parent),\r\n  },\r\n};\r\n\r\n//help function\r\nconst getCourses = async (parent: Student) => {\r\n  const allCourse: Course[] = [];\r\n  if (parent.courses) {\r\n    for (const c of parent.courses) {\r\n      const course = await dbQuery<Course>(Table.Course, {\r\n        _id: c?.courseId,\r\n      });\r\n      //console.log(course)\r\n      allCourse.push(course[0]);\r\n    }\r\n  }\r\n  return allCourse;\r\n};\r\n","import { User } from \"src/types/User\";\r\nimport { dbServiceGet } from \"../service/MongoDbService\";\r\nimport { Table } from \"../types/Table\";\r\nimport { dbAuth } from \"../service/MongoDBGraphQL\";\r\nimport { jwtSign } from \"../jwt/jwt-tools\";\r\n\r\ntype authValue = {\r\n  userName: string;\r\n  userPassword: string;\r\n};\r\nexport default {\r\n  Query: {\r\n    users: () => dbServiceGet(Table.User, {}, 0),\r\n    auth: async (parent: null, { userName, userPassword }: authValue) => {\r\n      const result = await dbAuth<User>({ userName, userPassword });\r\n      if (result) {\r\n        const token = jwtSign({ userName, userPassword });\r\n        return {\r\n          user: result,\r\n          token: token,\r\n        };\r\n      }\r\n      return result;\r\n    },\r\n  },\r\n};\r\n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"ObjectTypeDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"Query\"},\"interfaces\":[],\"directives\":[],\"fields\":[{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"users\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"ListType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"User\"}}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"auth\"},\"arguments\":[{\"kind\":\"InputValueDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"userName\"},\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]},{\"kind\":\"InputValueDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"userPassword\"},\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]}],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"AuthResult\"}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"course\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"ListType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Course\"}}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"teacher\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"ListType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Teacher\"}}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"student\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"ListType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Student\"}}}},\"directives\":[]}]},{\"kind\":\"ObjectTypeDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"AuthResult\"},\"interfaces\":[],\"directives\":[],\"fields\":[{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"user\"},\"arguments\":[],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"User\"}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"token\"},\"arguments\":[],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]}]},{\"kind\":\"ObjectTypeDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"User\"},\"interfaces\":[],\"directives\":[],\"fields\":[{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"_id\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"ID\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"userName\"},\"arguments\":[],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"userEmail\"},\"arguments\":[],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"userPassword\"},\"arguments\":[],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"userRole\"},\"arguments\":[],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]}]},{\"kind\":\"ObjectTypeDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"Course\"},\"interfaces\":[],\"directives\":[],\"fields\":[{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"_id\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"ID\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"courseId\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"courseName\"},\"arguments\":[],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"information\"},\"arguments\":[],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"students\"},\"arguments\":[{\"kind\":\"InputValueDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"gender\"},\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}},\"directives\":[]}],\"type\":{\"kind\":\"ListType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Student\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"teachers\"},\"arguments\":[],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Teacher\"}},\"directives\":[]}]},{\"kind\":\"ObjectTypeDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"Teacher\"},\"interfaces\":[],\"directives\":[],\"fields\":[{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"_id\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"ID\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"courseId\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"name\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"course\"},\"arguments\":[],\"type\":{\"kind\":\"ListType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Course\"}}},\"directives\":[]}]},{\"kind\":\"ObjectTypeDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"Student\"},\"interfaces\":[],\"directives\":[],\"fields\":[{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"_id\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"ID\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"studentName\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"gender\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"phone\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"courses\"},\"arguments\":[],\"type\":{\"kind\":\"ListType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Course\"}}},\"directives\":[]}]}],\"loc\":{\"start\":0,\"end\":738}};\n    doc.loc.source = {\"body\":\"type Query {\\r\\n    users: [User]!\\r\\n    auth(userName: String,userPassword: String): AuthResult\\r\\n    course:[Course]!\\r\\n    teacher:[Teacher]!\\r\\n    student:[Student]!\\r\\n}\\r\\ntype AuthResult{\\r\\n    user: User\\r\\n    token: String\\r\\n}\\r\\ntype User {\\r\\n    _id: ID!\\r\\n    userName: String\\r\\n    userEmail: String\\r\\n    userPassword: String\\r\\n    userRole: String\\r\\n}\\r\\n\\r\\ntype Course {\\r\\n    _id: ID!\\r\\n    courseId: String!\\r\\n    courseName: String\\r\\n    information: String\\r\\n    students(gender: String): [Student]\\r\\n    teachers:Teacher\\r\\n}\\r\\n\\r\\ntype Teacher {\\r\\n    _id: ID!\\r\\n    courseId: String!\\r\\n    name: String!\\r\\n    course: [Course]\\r\\n}\\r\\n\\r\\ntype Student {\\r\\n    _id: ID!\\r\\n    studentName: String!\\r\\n    gender: String!\\r\\n    phone: String!\\r\\n    courses: [Course]\\r\\n}\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \r\n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \r\n\n      module.exports = doc;\n    \r\n","export const schemaString = `\r\ntype Query {\r\n    users: [User]!\r\n    auth(userName: String,userPassword: String): AuthResult\r\n    course:[Course]!\r\n    teacher:[Teacher]!\r\n    student:[Student]!\r\n}\r\n\r\ntype AuthResult{\r\n    user: User\r\n    token: String\r\n}\r\ntype User {\r\n    _id: ID!\r\n    userName: String\r\n    userEmail: String\r\n    userPassword: String\r\n    userRole: String\r\n}\r\n\r\ntype Course {\r\n    _id: ID!\r\n    courseId: String!\r\n    courseName: String\r\n    information: String\r\n    students(gender: String): [Student]\r\n    teachers:Teacher\r\n}\r\n\r\ntype Teacher {\r\n    _id: ID!\r\n    courseId: String!\r\n    name: String!\r\n    course: [Course]\r\n}\r\n\r\ntype Student {\r\n    _id: ID!\r\n    studentName: String!\r\n    gender: String!\r\n    phone: String!\r\n    courses: [Course]\r\n}\r\n`","import { Collection, MongoClient } from \"mongodb\";\r\nimport { queryUserValue } from \"src/graphQlFiles/graphQLfn\";\r\nimport { Table } from \"../types/Table\";\r\n\r\nconst dbConnectionUrl =\r\n  \"mongodb+srv://leilu0229:AAaa123581321@cluster0.vm8df.mongodb.net/ServerlessCourse?retryWrites=true&w=majority\";\r\n\r\n//1. initial function return promise\r\n//2. map\r\n\r\nconst dbObject = async (dbCollectionName: string): Promise<Collection> => {\r\n  const dbInstance = await MongoClient.connect(dbConnectionUrl);\r\n  const dbObject = dbInstance.db(\"ServerlessCourse\");\r\n  const dbCollection = dbObject.collection(dbCollectionName);\r\n  return dbCollection;\r\n};\r\n\r\nconst dbData = async <T>(tableName: string): Promise<T[]> => {\r\n  const result = await dbObject(tableName);\r\n  return result.find().toArray();\r\n};\r\n\r\nconst dbAuth = async <T>(data: queryUserValue): Promise<T | null> => {\r\n  const result = await dbObject(Table.User);\r\n  return result.findOne({\r\n    userEmail: data.userName,\r\n    userPassword: data.userPassword,\r\n  });\r\n};\r\n\r\nconst dbQuery = async <T>(\r\n  tableName: string,\r\n  searchKey: object\r\n): Promise<T[]> => {\r\n  const result = await dbObject(tableName);\r\n  return result.find(searchKey).toArray();\r\n};\r\n\r\nconst dbAggregate = async <T>(\r\n    tableName: string,\r\n    localValue: string,\r\n    lookupTable: string,\r\n    lookupAttribute: number | string,\r\n    asValue: string\r\n  ) => {\r\n    const collection = await dbObject(tableName);\r\n    return collection\r\n      .aggregate([\r\n        {\r\n          $lookup: {\r\n            from: lookupTable,\r\n            localField: localValue,\r\n            foreignField: lookupAttribute,\r\n            as: asValue,\r\n          },\r\n        },\r\n      ])\r\n      .toArray();\r\n  };\r\n\r\nexport { dbData, dbAuth, dbQuery, dbAggregate };\r\n","import {\r\n  AggregationCursor,\r\n  Collection,\r\n  DeleteWriteOpResultObject,\r\n  InsertOneWriteOpResult,\r\n  MongoClient,\r\n  UpdateWriteOpResult,\r\n} from \"mongodb\";\r\nimport { queryUserValue } from \"src/graphQlFiles/graphQLfn\";\r\nimport { User } from \"src/types/User\";\r\n\r\nconst dbConnectionUrl =\r\n  \"mongodb+srv://leilu0229:AAaa123581321@cluster0.vm8df.mongodb.net/ServerlessCourse?retryWrites=true&w=majority\";\r\n\r\n//1. initial function return promise\r\n//2. map\r\n\r\nconst dbObject = async (dbCollectionName: string): Promise<Collection> => {\r\n  const dbInstance = await MongoClient.connect(dbConnectionUrl);\r\n  const dbObject = dbInstance.db(\"ServerlessCourse\");\r\n  const dbCollection = dbObject.collection(dbCollectionName);\r\n  return dbCollection;\r\n};\r\n//query\r\nconst dbServiceGet = async <T>(\r\n  tableName: string,\r\n  searchKey: object,\r\n  page: number\r\n): Promise<T[]> => {\r\n  const result = await dbObject(tableName);\r\n  return result\r\n    .find(searchKey)\r\n    .sort({ _id: 1 })\r\n    .skip(page * 1)\r\n    .limit(10)\r\n    .toArray();\r\n};\r\n//queryOne\r\nconst dbServiceGetOne = async <T>(\r\n  tableName: string,\r\n  data: queryUserValue,\r\n  page: number\r\n): Promise<T | null> => {\r\n  const result = await dbObject(tableName);\r\n  return result.findOne({\r\n    UserEmail: data.userName,\r\n    UserPassword: data.userPassword,\r\n  });\r\n};\r\n\r\nconst dbServiceInsert = async <T>(\r\n  tableName: string,\r\n  value: object\r\n): Promise<InsertOneWriteOpResult<any>> => {\r\n  const result = await dbObject(tableName);\r\n  return result.insertOne(value);\r\n};\r\n\r\nconst dbServiceUpdate = async <T>(\r\n  tableName: string,\r\n  value1: object,\r\n  value2: object\r\n): Promise<UpdateWriteOpResult> => {\r\n  const result = await dbObject(tableName);\r\n  return result.updateOne(value1, value2);\r\n};\r\n\r\nconst dbServiceDelete = async <T>(\r\n  tableName: string,\r\n  value1: object\r\n): Promise<DeleteWriteOpResultObject> => {\r\n  const result = await dbObject(tableName);\r\n  return result.deleteOne(value1);\r\n};\r\n\r\nconst dbServiceLookup = async <T>(\r\n  tableName: string,\r\n  localValue: string,\r\n  lookupTable: string,\r\n  lookupAttribute: number | string,\r\n  asValue: string\r\n) => {\r\n  const collection = await dbObject(tableName);\r\n  return collection\r\n    .aggregate([\r\n      {\r\n        $lookup: {\r\n          from: lookupTable,\r\n          localField: localValue,\r\n          foreignField: lookupAttribute,\r\n          as: asValue,\r\n        },\r\n      },\r\n    ])\r\n    .toArray();\r\n};\r\nexport {\r\n  dbServiceGet,\r\n  dbServiceInsert,\r\n  dbServiceUpdate,\r\n  dbServiceDelete,\r\n  dbServiceLookup,\r\n  dbServiceGetOne,\r\n};\r\n","export enum Table{\r\n    User = \"Users\",\r\n    Course = \"Course\",\r\n    Student = \"Student\",\r\n    Class = \"Class\",\r\n    Teacher = \"Teacher\"\r\n}","module.exports = require(\"apollo-server\");","module.exports = require(\"apollo-server-express\");","module.exports = require(\"babel-loader\");","module.exports = require(\"babel-preset-graphpack\");","module.exports = require(\"cosmiconfig\");","module.exports = require(\"dataloader\");","module.exports = require(\"friendly-errors-webpack-plugin\");","module.exports = require(\"fs\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"lodash/merge\");","module.exports = require(\"mongodb\");","module.exports = require(\"path\");","module.exports = require(\"webpack\");","module.exports = require(\"webpack-node-externals\");"],"sourceRoot":""}